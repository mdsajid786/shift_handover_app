{% extends "base.html" %}
{% block content %}
<h2>Dashboard</h2>
<div class="row">
    <div class="col-md-4">
        <h4>Open Incidents</h4>
        <ul>
            {% for incident in open_incidents %}
            <li>{{ incident.title }} ({{ incident.priority }})</li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-md-4">
        <h4>Current Shift Engineers</h4>
        <ul>
            {% for engineer in current_engineers %}
            <li>{{ engineer.name }}</li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">Open Key Points</div>
            <div class="card-body">
                <ul>
                    {% for kp in open_key_points %}
                    <li>{{ kp.description }}</li>
                    {% else %}
                    <li>No open key points</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="mt-4">
    <h4>Overview Chart</h4>
    <div id="chart"></div>
    <script>
        var graphJSON = {{ graphJSON|safe }};
        Plotly.newPlot('chart', graphJSON);
    </script>
</div>
{% endblock %}
